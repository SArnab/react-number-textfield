!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){e.exports=react},function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return o});var n=r(0);const i={string_value:""};class o extends n.Component{constructor(e){var t;if(super(e),this.state=i,this.handleKeyPress=(e=>{const t=e.charCode;let r=!1;if(!((t=t)>=48&&t<=57)){String.fromCharCode(t)!==this.props.decimal_character?r=!0:(0===this.props.precision||this.state.string_value.indexOf(this.props.decimal_character)>-1)&&(r=!0)}if(r)return e.preventDefault(),e.stopPropagation(),!1}),this.handleChange=(e=>{const t=s(e.target.value,this.props.decimal_character,this.props.group_separator,this.props.precision);this.setState({string_value:t.string_value}),"function"==typeof this.props.didChangeNumber&&this.props.didChangeNumber(t.number_value)}),e.precision<0||e.precision%1!=0)throw new Error("Maximum precision must be a positive integer.")}static derivedStateFromProps(e,t){if("number"==typeof e.number)return s(e.number.toString(),e.decimal_character,e.group_separator,e.precision)}render(){return n.createElement("input",{type:"text",className:this.props.className,value:this.state.string_value,placeholder:this.props.placeholder,onKeyPress:this.handleKeyPress,onChange:this.handleChange})}}function s(e,t,r,n){const i=new RegExp(`[^0-9${o=t,o.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}]+`,"g");var o;let s=e.replace(i,"").replace(t,"."),a=function(e){let t=void 0;const r=e.indexOf(".")>-1;r&&1===e.length&&(e="0"+e);t=r?parseFloat(e):parseInt(e);return t}(s);if(void 0===a||isNaN(a))return console.warn("String could not be represented as a number. Resetting textfield value."),{number_value:void 0,string_value:""};const l=s.indexOf(".")>-1,c=function(e){const t=e.toString().split(".");if(t.length>1)return t[1].length;return 0}(s);if(a%1!=0&&c>n){console.warn("Additional decimal digit will exceed maximum precision.");const e=Math.pow(10,n);a=Math.floor(a*e)/e}return{number_value:a,string_value:s=function(e,t,r,n){const i=e.toString().split("."),o=i[0],s=i.length>1?i[1]:"",a=Math.floor(o.length/3);let l="";if(a>0)for(let e=1;e<=a;e++)l=o.substr(-3*e,3)+(e>1?t+l:"");const c=o.length%3;c>0&&(l=o.substr(0,c)+(l.length>0?t+l:""));n>-1&&(l+=r+s,n>s.length&&(l+=new Array(n-s.length).fill(0).join("")));return l}(a,r,t,l?Math.max(0,Math.min(c,n)):-1)}}o.defaultProps={decimal_character:".",group_separator:",",precision:2}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwicmVhY3RcIiIsIndlYnBhY2s6Ly8vLi9zcmMvTnVtYmVyVGV4dGZpZWxkLnRzeCJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJ2YWx1ZSIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicmVhY3QiLCJpbml0aWFsU3RhdGUiLCJzdHJpbmdfdmFsdWUiLCJOdW1iZXJUZXh0ZmllbGQiLCJyZWFjdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiW29iamVjdCBPYmplY3RdIiwicHJvcHMiLCJjaGFyQ29kZSIsInN1cGVyIiwidGhpcyIsInN0YXRlIiwiaGFuZGxlS2V5UHJlc3MiLCJlIiwic2hvdWxkQ2FuY2VsIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiZGVjaW1hbF9jaGFyYWN0ZXIiLCJwcmVjaXNpb24iLCJpbmRleE9mIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJoYW5kbGVDaGFuZ2UiLCJwYXJzZVJlc3VsdCIsInBhcnNlU3RyaW5nIiwidGFyZ2V0IiwiZ3JvdXBfc2VwYXJhdG9yIiwic2V0U3RhdGUiLCJkaWRDaGFuZ2VOdW1iZXIiLCJudW1iZXJfdmFsdWUiLCJFcnJvciIsIm5leHRQcm9wcyIsImN1cnJTdGF0ZSIsIm51bWJlciIsInRvU3RyaW5nIiwidHlwZSIsImNsYXNzTmFtZSIsInBsYWNlaG9sZGVyIiwib25LZXlQcmVzcyIsIm9uQ2hhbmdlIiwiZGVjaW1hbENoYXIiLCJncm91cENoYXIiLCJtYXhQcmVjaXNpb24iLCJzYW5pdHplUmVnRXhwIiwiUmVnRXhwIiwic3RyIiwicmVwbGFjZSIsInN0cmluZ1ZhbHVlIiwibnVtYmVyVmFsdWUiLCJ1bmRlZmluZWQiLCJpc0RlY2ltYWwiLCJsZW5ndGgiLCJwYXJzZUZsb2F0IiwicGFyc2VJbnQiLCJzdHJpbmdUb051bWJlciIsImlzTmFOIiwiY29uc29sZSIsIndhcm4iLCJzdHJpbmdQYXJ0cyIsInNwbGl0IiwiY291bnREZWNpbWFsUHJlY2lzaW9uIiwicm91bmRpbmdDb25zdGFudCIsIk1hdGgiLCJwb3ciLCJmbG9vciIsInN0cmluZ1ZhbHVlUGFydHMiLCJpbnRlZ2VyU3RyaW5nIiwiZGVjaW1hbFN0cmluZyIsIm51bUdyb3VwcyIsImZvcm1hdHRlZFN0cmluZyIsInN1YnN0ciIsImludGVnZXJSZW1haW5kZXIiLCJBcnJheSIsImZpbGwiLCJqb2luIiwibnVtYmVyVG9TdHJpbmciLCJtYXgiLCJtaW4iLCJkZWZhdWx0UHJvcHMiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVosRUFBQW1CLEVBQUEsU0FBQWpCLEdBQ0FZLE9BQUFDLGVB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RHRDLEVBQUEwRSxjQVhkN0Qsa0JBQW1CLElBQ25CUyxnQkFBaUIsSUFDakJSLFVBQVciLCJmaWxlIjoicmVhY3QtbnVtYmVyLXRleHRmaWVsZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlYWN0OyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuXG5pbnRlcmZhY2UgSVByb3BzIHtcblx0LyoqXG5cdCAqIEluaXRpYWwgbnVtYmVyIHZhbHVlIHRvIGRpc3BsYXkgaW4gdGhlIHRleHRmaWVsZC5cblx0ICogQHR5cGUge251bWJlcn1cblx0ICovXG5cdG51bWJlcj86IG51bWJlcjtcblxuXHQvKipcblx0ICogVGhlIGNoYXJhY3RlciB1c2VkIHRvIHNlcGFyYXRlIHRoZSBkZWNpbWFsIHBhcnRzIGZyb20gdGhlIHdob2xlIG51bWJlci5cblx0ICogVGhpcyBpcyB1c3VhbGx5IGEgY29tbWEgb3IgYSBkb3QuXG5cdCAqIEB0eXBlIHtzdHJpbmd9XG5cdCAqL1xuXHRkZWNpbWFsX2NoYXJhY3Rlcjogc3RyaW5nO1xuXG5cdC8qKlxuXHQgKiBUaGUgY2hhcmFjdGVyIHVzZWQgdG8gc2VwYXJhdGUgYSBncm91cCBvZiBkaWdpdHMgaW4gdGhlIG51bWJlci5cblx0ICogVGhpcyBpcyBkb25lIGV2ZXJ5IDMgKHRob3VzYW5kKSB2YWx1ZXMuXG5cdCAqIEB0eXBlIHtzdHJpbmd9XG5cdCAqL1xuXHRncm91cF9zZXBhcmF0b3I6IHN0cmluZztcblxuXHQvKipcblx0ICogVGhlIG1heGltdW0gbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIHRvIGFsbG93LlxuXHQgKiBAcGFyYW0ge251bWJlcn1cblx0ICovXG5cdHByZWNpc2lvbjogbnVtYmVyO1xuXG5cdC8qKlxuXHQgKiBKU1ggQXR0cmlidXRlIGZvciBDU1MgY2xhc3NuYW1lc1xuXHQgKiBAdHlwZSB7YW55fVxuXHQgKi9cblx0Y2xhc3NOYW1lPzogYW55O1xuXG5cdC8qKlxuXHQgKiBKU1ggYXR0cmlidXRlIGZvciB0aGUgaW5wdXQgcGxhY2Vob2xkZXJcblx0ICogQHR5cGUge2FueX1cblx0ICovXG5cdCBwbGFjZWhvbGRlcj86IGFueTtcblxuXHQvKipcblx0ICogQ2FsbGJhY2sgZnVuY3Rpb24gdG8gcmVjZWl2ZSBjaGFuZ2VzIGluIHRoZSBudW1iZXIgdmFsdWUuXG5cdCAqIEBwYXJhbSB7KHZhbHVlOiBudW1iZXJ8dW5kZWZpbmVkKSA9PiB2b2lkfVxuXHQgKi9cblx0ZGlkQ2hhbmdlTnVtYmVyPzogKHZhbHVlOiBudW1iZXJ8dW5kZWZpbmVkKSA9PiB2b2lkO1xufTtcblxuaW50ZXJmYWNlIElTdGF0ZSB7XG5cdC8qKlxuXHQgKiBUaGUgc3RyaW5nIHRvIGRpc3BsYXkgaW4gdGhlIHRleHRmaWVsZC5cblx0ICogQHR5cGUge3N0cmluZ31cblx0ICovXG5cdHN0cmluZ192YWx1ZTogc3RyaW5nO1xufTtcblxuaW50ZXJmYWNlIElQYXJzZVJlc3VsdCB7XG5cdHN0cmluZ192YWx1ZTogc3RyaW5nO1xuXHRudW1iZXJfdmFsdWU6IG51bWJlcnx1bmRlZmluZWQ7XG59XG5cbmNvbnN0IGRlZmF1bHRQcm9wczogSVByb3BzID0ge1xuXHRkZWNpbWFsX2NoYXJhY3RlcjogXCIuXCIsXG5cdGdyb3VwX3NlcGFyYXRvcjogXCIsXCIsXG5cdHByZWNpc2lvbjogMixcbn07XG5cbmNvbnN0IGluaXRpYWxTdGF0ZTogSVN0YXRlID0ge1xuXHRzdHJpbmdfdmFsdWU6IFwiXCIsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOdW1iZXJUZXh0ZmllbGQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SVByb3BzLCBJU3RhdGU+IHtcblxuXHRwdWJsaWMgc3RhdGljIGRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcblxuXHRwdWJsaWMgc3RhdGUgPSBpbml0aWFsU3RhdGU7XG5cblx0LyoqXG5cdCAqIElmIGEgbnVtYmVyIGlzIHByb3ZpZGVkIGFzIGEgcHJvcCwgdGhpcyB3aWxsIGNyZWF0ZSBhIG5ldyBmb3JtYXR0ZWQgc3RyaW5nXG5cdCAqIGZvciB0aGF0IG51bWJlci5cblx0ICogQHBhcmFtIHtJUHJvcHN9IG5leHRQcm9wc1xuXHQgKiBAcGFyYW0ge0lTdGF0ZX0gY3VyclN0YXRlXG5cdCAqIEByZXR1cm4ge1BhcnRpYWw8SVN0YXRlPnx1bmRlZmluZWR9XG5cdCAqL1xuXHRwdWJsaWMgc3RhdGljIGRlcml2ZWRTdGF0ZUZyb21Qcm9wcyhuZXh0UHJvcHM6IElQcm9wcywgY3VyclN0YXRlOiBJU3RhdGUpOiBQYXJ0aWFsPElTdGF0ZT58dW5kZWZpbmVkIHtcblx0XHRpZiAodHlwZW9mIG5leHRQcm9wcy5udW1iZXIgPT09IFwibnVtYmVyXCIpIHtcblx0XHRcdHJldHVybiBwYXJzZVN0cmluZyhcblx0XHRcdFx0bmV4dFByb3BzLm51bWJlci50b1N0cmluZygpLFxuXHRcdFx0XHRuZXh0UHJvcHMuZGVjaW1hbF9jaGFyYWN0ZXIsXG5cdFx0XHRcdG5leHRQcm9wcy5ncm91cF9zZXBhcmF0b3IsXG5cdFx0XHRcdG5leHRQcm9wcy5wcmVjaXNpb25cblx0XHRcdCk7XG5cdFx0fVxuXHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdH1cblxuXHRjb25zdHJ1Y3Rvcihwcm9wczogSVByb3BzKSB7XG5cdFx0c3VwZXIocHJvcHMpO1xuXG5cdFx0Ly8gcHJlY2lzaW9uIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyIHZhbHVlLlxuXHRcdGlmIChwcm9wcy5wcmVjaXNpb24gPCAwIHx8IHByb3BzLnByZWNpc2lvbiAlIDEgIT09IDApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIk1heGltdW0gcHJlY2lzaW9uIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLlwiKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgcmVuZGVyKCkge1xuXHRcdHJldHVybiAoXG5cdFx0XHQ8aW5wdXRcblx0XHRcdFx0dHlwZT1cInRleHRcIlxuXHRcdFx0XHRjbGFzc05hbWU9eyB0aGlzLnByb3BzLmNsYXNzTmFtZSB9XG5cdFx0XHRcdHZhbHVlPXsgdGhpcy5zdGF0ZS5zdHJpbmdfdmFsdWUgfVxuXHRcdFx0XHRwbGFjZWhvbGRlcj17IHRoaXMucHJvcHMucGxhY2Vob2xkZXIgfVxuXHRcdFx0XHRvbktleVByZXNzPXsgdGhpcy5oYW5kbGVLZXlQcmVzcyB9XG5cdFx0XHRcdG9uQ2hhbmdlPXsgdGhpcy5oYW5kbGVDaGFuZ2UgfVxuXHRcdFx0Lz5cblx0XHQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEV2ZW50IGxpc3RlbmVyIGZvciB0aGUgS2V5UHJlc3MgZXZlbnQgZmlyZWQgZnJvbSB0aGUgaW5wdXQgY29udHJvbC5cblx0ICogQHBhcmFtIHtSZWFjdC5LZXlib2FyZEV2ZW50PGFueT59XG5cdCAqIEByZXR1cm4gYm9vbGVhblxuXHQgKi9cblx0cHVibGljIGhhbmRsZUtleVByZXNzID0gKGU6IFJlYWN0LktleWJvYXJkRXZlbnQ8YW55PikgPT4ge1xuXHRcdGNvbnN0IGNoYXJDb2RlID0gZS5jaGFyQ29kZTtcblx0XHRsZXQgc2hvdWxkQ2FuY2VsID0gZmFsc2U7XG5cblx0XHRpZiAoIWNoYXJDb2RlSXNEaWdpdChjaGFyQ29kZSkpIHtcblx0XHRcdGNvbnN0IGNoYXJTdHJpbmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXJDb2RlKTtcblxuXHRcdFx0Ly8gSWYgaXQgaXMgbm90IGEgZGlnaXQgb3IgYSBkZWNpbWFsIGNoYXJhY3RlciwgY2FuY2VsIHRoZSBrZXkuXG5cdFx0XHRpZiAoY2hhclN0cmluZyAhPT0gdGhpcy5wcm9wcy5kZWNpbWFsX2NoYXJhY3Rlcikge1xuXHRcdFx0XHRzaG91bGRDYW5jZWwgPSB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gSWYgdGhlIGlucHV0IGZpZWxkIGRvZXMgbm90IGFsbG93IGRlY2ltYWxzLCBvciBpZiB3ZSBhbHJlYWR5IHR5cGVkIG9uZSwgY2FuY2VsIHRoZSBrZXkuXG5cdFx0XHRcdGlmICh0aGlzLnByb3BzLnByZWNpc2lvbiA9PT0gMCB8fCB0aGlzLnN0YXRlLnN0cmluZ192YWx1ZS5pbmRleE9mKHRoaXMucHJvcHMuZGVjaW1hbF9jaGFyYWN0ZXIpID4gLTEpIHtcblx0XHRcdFx0XHRzaG91bGRDYW5jZWwgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHNob3VsZENhbmNlbCkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH07XG5cblx0LyoqXG5cdCAqIEV2ZW50IGxpc3RlbmVyIGZvciB0aGUgY2hhbmdlIGV2ZW50IGZpcmVkIGZyb20gdGhlIGlucHV0IGNvbnRyb2wuXG5cdCAqIEBwYXJhbSB7UmVhY3QuQ2hhbmdlRXZlbnQ8YW55Pn0gZVxuXHQgKiBAcmV0dXJuIHZvaWRcblx0ICovXG5cdHB1YmxpYyBoYW5kbGVDaGFuZ2UgPSAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8YW55PikgPT4ge1xuXHRcdGNvbnN0IHBhcnNlUmVzdWx0ID0gcGFyc2VTdHJpbmcoXG5cdFx0XHRlLnRhcmdldC52YWx1ZSxcblx0XHRcdHRoaXMucHJvcHMuZGVjaW1hbF9jaGFyYWN0ZXIsXG5cdFx0XHR0aGlzLnByb3BzLmdyb3VwX3NlcGFyYXRvcixcblx0XHRcdHRoaXMucHJvcHMucHJlY2lzaW9uXG5cdFx0KTtcblxuXHRcdHRoaXMuc2V0U3RhdGUoe1xuXHRcdFx0c3RyaW5nX3ZhbHVlOiBwYXJzZVJlc3VsdC5zdHJpbmdfdmFsdWUsXG5cdFx0fSk7XG5cblx0XHRpZiAodHlwZW9mIHRoaXMucHJvcHMuZGlkQ2hhbmdlTnVtYmVyID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdHRoaXMucHJvcHMuZGlkQ2hhbmdlTnVtYmVyKHBhcnNlUmVzdWx0Lm51bWJlcl92YWx1ZSk7XG5cdFx0fVxuXHR9XG59O1xuXG4vKipcbiAqIFBhcnNlcyBhIHN0cmluZyBhcyBhIG51bWJlciwgYW5kIHJldHVybnMgdGhlIG51bWJlciBhbmQgZm9ybWF0dGluZyBzdHJpbmcuXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBkZWNpbWFsQ2hhclxuICogQHBhcmFtIHtzdHJpbmd9IGdyb3VwQ2hhclxuICogQHBhcmFtIHtudW1iZXJ9IG1heFByZWNpc2lvblxuICogQHJldHVybiB7SVBhcnNlUmVzdWx0fVxuICovXG5mdW5jdGlvbiBwYXJzZVN0cmluZyh2YWx1ZTogc3RyaW5nLCBkZWNpbWFsQ2hhcjogc3RyaW5nLCBncm91cENoYXI6IHN0cmluZywgbWF4UHJlY2lzaW9uOiBudW1iZXIpOiBJUGFyc2VSZXN1bHQge1xuXHRjb25zdCBzYW5pdHplUmVnRXhwID0gbmV3IFJlZ0V4cChgW14wLTkkeyBlc2NhcGVSZWdFeHAoZGVjaW1hbENoYXIpIH1dK2AsIFwiZ1wiKTtcblx0bGV0IHN0cmluZ1ZhbHVlID0gdmFsdWUucmVwbGFjZShzYW5pdHplUmVnRXhwLCBcIlwiKS5yZXBsYWNlKGRlY2ltYWxDaGFyLCBcIi5cIik7XG5cdGxldCBudW1iZXJWYWx1ZSA9IHN0cmluZ1RvTnVtYmVyKHN0cmluZ1ZhbHVlKTtcblxuXHQvLyBJZiB3ZSBjb3VsZCBub3QgZmluZCBhIG51bWJlciwgcmVzZXQgdGhlIHRleHRmaWVsZC5cblx0aWYgKHR5cGVvZiBudW1iZXJWYWx1ZSA9PT0gXCJ1bmRlZmluZWRcIiB8fCBpc05hTihudW1iZXJWYWx1ZSkpIHtcblx0XHRjb25zb2xlLndhcm4oXCJTdHJpbmcgY291bGQgbm90IGJlIHJlcHJlc2VudGVkIGFzIGEgbnVtYmVyLiBSZXNldHRpbmcgdGV4dGZpZWxkIHZhbHVlLlwiKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bnVtYmVyX3ZhbHVlOiB1bmRlZmluZWQsXG5cdFx0XHRzdHJpbmdfdmFsdWU6IFwiXCIsXG5cdFx0fTtcblx0fVxuXG5cdC8vIElmIGl0IGV4Y2VlZHMgdGhlIG1heGltdW0gcHJlY2lzaW9uLCBjaG9wIG9mZiBleGNlc3MgZGlnaXRzLlxuXHRjb25zdCBpc0RlY2ltYWwgPSBzdHJpbmdWYWx1ZS5pbmRleE9mKFwiLlwiKSA+IC0xO1xuXHRjb25zdCBwcmVjaXNpb24gPSBjb3VudERlY2ltYWxQcmVjaXNpb24oc3RyaW5nVmFsdWUpO1xuXHRpZiAobnVtYmVyVmFsdWUgJSAxICE9PSAwICYmIHByZWNpc2lvbiA+IG1heFByZWNpc2lvbikge1xuXHRcdC8vIEV4Y2VlZHMgcHJlY2lzaW9uLCB3ZSBjYW5ub3QgYWxsb3cgaXQuXG5cdFx0Y29uc29sZS53YXJuKFwiQWRkaXRpb25hbCBkZWNpbWFsIGRpZ2l0IHdpbGwgZXhjZWVkIG1heGltdW0gcHJlY2lzaW9uLlwiKTtcblxuXHRcdGNvbnN0IHJvdW5kaW5nQ29uc3RhbnQgPSBNYXRoLnBvdygxMCwgbWF4UHJlY2lzaW9uKTtcblx0XHRudW1iZXJWYWx1ZSA9IE1hdGguZmxvb3IobnVtYmVyVmFsdWUgKiByb3VuZGluZ0NvbnN0YW50KSAvIHJvdW5kaW5nQ29uc3RhbnQ7XG5cdH1cblxuXHQvLyBSZWNyZWF0ZSBhIHN0cmluZyB2YWx1ZSB1c2luZyB0aGUgZGVyaXZlZCBudW1iZXJcblx0c3RyaW5nVmFsdWUgPSBudW1iZXJUb1N0cmluZyhcblx0XHRudW1iZXJWYWx1ZSxcblx0XHRncm91cENoYXIsXG5cdFx0ZGVjaW1hbENoYXIsXG5cdFx0aXNEZWNpbWFsID8gTWF0aC5tYXgoMCwgTWF0aC5taW4ocHJlY2lzaW9uLCBtYXhQcmVjaXNpb24pKSA6IC0xXG5cdCk7XG5cblx0cmV0dXJuIHtcblx0XHRudW1iZXJfdmFsdWU6IG51bWJlclZhbHVlLFxuXHRcdHN0cmluZ192YWx1ZTogc3RyaW5nVmFsdWUsXG5cdH07XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbnVtZXJpY2FsIHJlcHJlc2VudGF0aW9uIG9mIGEgbnVtYmVyLlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKiBAcmV0dXJuIG51bWJlcnx1bmRlZmluZWRcbiAqL1xuZnVuY3Rpb24gc3RyaW5nVG9OdW1iZXIodmFsdWU6IHN0cmluZyk6IG51bWJlcnx1bmRlZmluZWQge1xuXHRsZXQgbnVtYmVyVmFsdWU6IG51bWJlcnx1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cdFxuXHQvLyBJZiB3ZSBoYXZlIGEgZGVjaW1hbCBkb3QgaW4gdGhlIHN0cmluZywgdGhlbiBpdCBpcyBhIGZsb2F0aW5nIHBvaW50IG51bWJlci5cblx0Y29uc3QgaXNEZWNpbWFsOiBib29sZWFuID0gdmFsdWUuaW5kZXhPZihcIi5cIikgPiAtMTtcblxuXHQvLyBJZiBpdCBpcyBhIGZsb2F0aW5nIHBvaW50IG51bWJlciwgbWFrZSBzdXJlIHdlIGhhdmUgYXQgbGVhc3Qgb25lIHdob2xlIG51bWJlci5cblx0Ly8gQXNzdW1lIHplcm8gaWYgbm90aGluZyBpcyB0aGVyZS5cblx0aWYgKGlzRGVjaW1hbCAmJiB2YWx1ZS5sZW5ndGggPT09IDEpIHtcblx0XHR2YWx1ZSA9IFwiMFwiICsgdmFsdWU7XG5cdH1cblxuXHQvLyBJZiBpdCBoYXMgdGhlIGRlY2ltYWwgY2hhcmFjdGVyLCB3ZSB3aWxsIHBhcnNlIHRoZSBzdHJpbmcgYXMgYSBkZWNpbWFsIHZhbHVlLlxuXHRpZiAoaXNEZWNpbWFsKSB7XG5cdFx0bnVtYmVyVmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKTtcblx0fSBlbHNlIHtcblx0XHRudW1iZXJWYWx1ZSA9IHBhcnNlSW50KHZhbHVlKTtcblx0fVxuXG5cdHJldHVybiBudW1iZXJWYWx1ZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgbnVtYmVyIGdpdmVuIGEgc3BlY2lmaWMgZ3JvdXAgY2hhcmFjdGVyIGFuZCBkZWNpbWFsIGNoYXJhY3Rlci5cbiAqIFByb3ZpZGluZyAtMSBmb3IgcHJlY2lzaW9uIHdpbGwgcmVtb3ZlIHRoZSBkZWNpbWFsIHBvaW50IGFsdG9nZXRoZXIuXG4gKiBQcm92aWRpbmcgMCBmb3IgcHJlY2lzaW9uIHdpbGwgYWRkIGp1c3QgdGhlIGRlY2ltYWwgcG9pbnQuXG4gKiBBbnkgcG9zaXRpdmUgbnVtYmVyIHdpbGwgYWRkIHRoZSBkZWNpbWFsIHZhbHVlcyBhbmQgcGFkIHdpdGggemVyb2VzLlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gKiBAcGFyYW0ge3N0cmluZ30gZ3JvdXBDaGFyXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVjaW1hbENoYXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBwcmVjaXNpb25cbiAqIEByZXR1cm4gc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIG51bWJlclRvU3RyaW5nKHZhbHVlOiBudW1iZXIsIGdyb3VwQ2hhcjogc3RyaW5nLCBkZWNpbWFsQ2hhcjogc3RyaW5nLCBwcmVjaXNpb246IG51bWJlcik6IHN0cmluZyB7XG5cdGNvbnN0IHN0cmluZ1ZhbHVlUGFydHMgPSB2YWx1ZS50b1N0cmluZygpLnNwbGl0KFwiLlwiKTtcblx0Y29uc3QgaW50ZWdlclN0cmluZyA9IHN0cmluZ1ZhbHVlUGFydHNbMF07XG5cdGNvbnN0IGRlY2ltYWxTdHJpbmcgPSBzdHJpbmdWYWx1ZVBhcnRzLmxlbmd0aCA+IDEgPyBzdHJpbmdWYWx1ZVBhcnRzWzFdIDogXCJcIjtcblx0Y29uc3QgbnVtR3JvdXBzID0gTWF0aC5mbG9vcihpbnRlZ2VyU3RyaW5nLmxlbmd0aCAvIDMpO1xuXHRsZXQgZm9ybWF0dGVkU3RyaW5nOiBzdHJpbmcgPSBcIlwiO1xuXG5cdC8vIEFkZCB0aGUgd2hvbGUgaW50ZWdlciB2YWx1ZXMsIHNlcGFyYXRlZCBieSBldmVyeSAzIG51bWJlcnMgd2l0aCB0aGUgZ3JvdXBDaGFyXG5cdGlmIChudW1Hcm91cHMgPiAwKSB7XG5cdFx0Zm9yIChsZXQgaSA9IDE7IGkgPD0gbnVtR3JvdXBzOyBpKyspIHtcblx0XHRcdGZvcm1hdHRlZFN0cmluZyA9IGludGVnZXJTdHJpbmcuc3Vic3RyKGkgKiAtMywgMykgKyAoaSA+IDEgPyBncm91cENoYXIgKyBmb3JtYXR0ZWRTdHJpbmcgOiBcIlwiKTtcblx0XHR9XG5cdH1cblxuXHQvLyBBZGQgdGhlIHJlbWFpbmluZyBpbnRlZ2VycyB0aGF0IGRpZG4ndCBmYWxsIGludG8gYSBncm91cCBvZiAzXG5cdGNvbnN0IGludGVnZXJSZW1haW5kZXIgPSBpbnRlZ2VyU3RyaW5nLmxlbmd0aCAlIDM7XG5cdGlmIChpbnRlZ2VyUmVtYWluZGVyID4gMCkge1xuXHRcdGZvcm1hdHRlZFN0cmluZyA9IGludGVnZXJTdHJpbmcuc3Vic3RyKDAsIGludGVnZXJSZW1haW5kZXIpICsgKGZvcm1hdHRlZFN0cmluZy5sZW5ndGggPiAwID8gZ3JvdXBDaGFyICsgZm9ybWF0dGVkU3RyaW5nIDogXCJcIik7XG5cdH1cblxuXHQvLyBJZiB3ZSBhcmUgaW5jbHVkaW5nIGRlY2ltYWwgdmFsdWVzLCBhZGQgdGhlIGRlY2ltYWwgY2hhcmFjdGVyIGFuZCB0aGUgZGVjaW1hbCBzdHJpbmcgdmFsdWVzLlxuXHQvLyBGaWxsIGluIDBzIGZvciBhbnkgcmVtYWluaW5nIHByZWNpc2lvbi5cblx0aWYgKHByZWNpc2lvbiA+IC0xKSB7XG5cdFx0Zm9ybWF0dGVkU3RyaW5nICs9IGRlY2ltYWxDaGFyICsgZGVjaW1hbFN0cmluZztcblx0XHRpZiAocHJlY2lzaW9uID4gZGVjaW1hbFN0cmluZy5sZW5ndGgpIHtcblx0XHRcdGZvcm1hdHRlZFN0cmluZyArPSAobmV3IEFycmF5KHByZWNpc2lvbiAtIGRlY2ltYWxTdHJpbmcubGVuZ3RoKSkuZmlsbCgwKS5qb2luKFwiXCIpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBmb3JtYXR0ZWRTdHJpbmc7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcHJlY2lzaW9uIChudW1iZXIgb2YgZGVjaW1hbCBwbGFjZXMpIGluIGEgbnVtYmVyaWNhbCBzdHJpbmcuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBkZWNpbWFsQ2hhciBUaGUgY2hhcmFjdGVyIHVzZWQgZm9yIGEgZGVjaW1hbC5cbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuZnVuY3Rpb24gY291bnREZWNpbWFsUHJlY2lzaW9uKHZhbHVlOiBzdHJpbmcpOiBudW1iZXIge1xuXHRjb25zdCBzdHJpbmdQYXJ0cyA9IHZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpO1xuXHRpZiAoc3RyaW5nUGFydHMubGVuZ3RoID4gMSkge1xuXHRcdHJldHVybiBzdHJpbmdQYXJ0c1sxXS5sZW5ndGg7XG5cdH1cblxuXHRyZXR1cm4gMDtcbn1cblxuLyoqXG4gKiBFc2NhcGVzIGNlcnRhaW4gY2hhcmFjdGVycyBpbiBhIHN0cmluZyBhbmQgcHJlcGFyZXMgaXQgZm9yIHVzZSBhcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbi5cbiAqIEBzZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzQ0NjE3MC9lc2NhcGUtc3RyaW5nLWZvci11c2UtaW4tamF2YXNjcmlwdC1yZWdleC82OTY5NDg2IzY5Njk0ODZcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZXNjYXBlUmVnRXhwKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcblx0cmV0dXJuIHN0ci5yZXBsYWNlKC9bXFwtXFxbXFxdXFwvXFx7XFx9XFwoXFwpXFwqXFwrXFw/XFwuXFxcXFxcXlxcJFxcfF0vZywgXCJcXFxcJCZcIik7XG59XG5cbi8qKlxuICogV2hldGhlciBvciBub3QgYSBnaXZlbiBjaGFyYWN0ZXIgY29kZSBtYXBzIHRvIGEgZGVjaW1hbCBkaWdpdCAoMC05KS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGNoYXJDb2RlSXNEaWdpdChjaGFyQ29kZTogbnVtYmVyKTogYm9vbGVhbiB7XG5cdHJldHVybiBjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1Nztcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=